var game,saveFields="fancyName word guesses letterColors specialLetters gameSettings".split(" ");
function WordGame(a){this.reloadMessage="Progress will be saved if you leave or reload the game";this.maxGuesses=10;this.wordRows=[];this.eliminations=[];this.line='<span class = "word-col"></span><span class = "word-col"></span><span class = "word-col"></span><span class = "word-col"></span><span class = "word-col"></span><span class = "response"></span><span class = "response"></span>';this.gameName=a;this.fancyName="classic";"multi"==a?this.fancyName="multiplayer":"easy"==a?this.fancyName="practice":
"time"==a&&(this.fancyName="time trial")}WordGame.prototype.toString=function(){return this.gameName};WordGame.prototype.setWord=function(a){this.word=waves(a)};WordGame.prototype.getWord=function(){return this.word};WordGame.prototype.numberOfGuesses=function(){return this.guesses.length};WordGame.prototype.focusInput=function(){$("#"+game.gameName+"-guess-input").focus();return $("#"+game.gameName+"-guess-input")};
WordGame.prototype.isValidWord=function(a){if(5!=a.length)return"The word must be five letters long!";if(-1!=a.search(/[^a-zA-Z]/))return"Only letters are allowed!";if(a.repeatedLetters())return"Words with double letters are not allowed!";if(null==largeWordList.binarySearch(a))return"This word is not in the dictionary! Submit a bug if you think it should!";if("undefined"!=typeof game)for(var b=0;b<game.guesses.length;b++)if(this.guesses[b]==a)return"You should not submit the same word twice. (you're welcome...)";
return!0};WordGame.prototype.pickWord=function(){game.setWord(smallWordList[Math.floor(Math.random()*smallWordList.length+1)]);this.setupFirstGuess()};
WordGame.prototype.makeGameEl=function(){this.gameEl=makeElement("div",{id:this.gameName+"-game","class":"game-window"},"#game-container");this.gameContainer=makeElement("div",{id:this.gameName+"-game-wrapper","class":"game-wrapper hidden-game"},game.gameEl);$(".holder").droppable({drop:function(a,b){game.letterDropped(this,b.helper);game.focusInput()},accept:".word-col"});$(".holder").on("click",game.clickHolder)};
WordGame.prototype.addResponseTitles=function(a){var b=makeElement("span",{"class":"response",id:"rlrp",title:"Right letter right place. A letter could be in the first position in both words, for example."});b.innerHTML="rlrp";$(a).prepend(b);a=makeElement("span",{"class":"response",id:"rlwp",title:"Right letter wrong place. A letter could be in the first position in the word and the second position in the guess, for example."});a.innerHTML="rlwp";$(b).before(a)};
WordGame.prototype.addInputs=function(a){a=makeElement("p",{"class":"bottom-guess-inputs",id:game.gameName+"-bottom-guess-inputs"},a);makeElement("input",{type:"text","class":"guess-input",id:game.gameName+"-guess-input",maxlength:"5"},a);$(".guess-input").on("keyup",{name:game.gameName+"-guess-button"},submitForm);makeElement("input",{"class":"guess-button",id:game.gameName+"-guess-button",type:"submit",value:"Submit guess!"},a);$(".guess-button").on("click",game.submitGuess)};
WordGame.prototype.setup=function(a){this.makeGameEl();this.extraSetup();if("undefined"!=typeof a){for(var b=0;b<saveFields.length;b++)game[saveFields[b]]=a[saveFields[b]];this.continueGame()}else this.guesses=[],this.letterColors=[],this.specialLetters={top:["","","","",""],tentative:[],eliminated:[]},this.gameSettings={autoGreen:!0,autoOrange:!0,autoRed:!0,autoRedOnGuess:!0,fontSize:!0,autoSave:0==canLocalStorage()?!1:!0},this.pickWord()};WordGame.prototype.extraSetup=function(){};
WordGame.prototype.setupFirstGuess=function(){var a=makeElement("div",{id:this.gameName+"-first-guess-wrapper","class":"first-guess-wrapper hidden-game"},game.gameEl);makeElement("p",{"class":"first-guess",id:this.gameName+"-first-guess"},a).innerHTML="time"==this.gameName?'First guess:<p class = "small-notice">(Timer starts after you submit)</p>':"First guess:";this.addInputs(a);this.animateToFirstguess()};
WordGame.prototype.submitGuess=function(){game.extraEnterGuess();var a=document.getElementById(game.gameName+"-guess-input"),b=a.value.toLowerCase(),c=game.isValidWord(b);if(1==c)if(game.guesses.push(b),a.placeholder=game.maxGuesses-game.numberOfGuesses()+" guess"+(9==game.numberOfGuesses()?"":"es")+" left",a.value="",beach(game.getWord())==b)game.gameWon();else if(game.numberOfGuesses()==game.maxGuesses)game.gameLost();else return game.letterColors.push(["","","","",""]),a=game.guessFeedback(b),
1==game.numberOfGuesses()?(game.addResponseTitles(game.gameContainer),game.addInputs(game.gameContainer),game.animateFromFirstGuess(a)):($(a).addClass("hidden-game"),game.animateGuess(a)),a;else{var e;$("#popup").popup({content:function(){return buildPopup("Word is invalid!",c+"<br /><br />game closes automatically in 3 seconds","Continue","$('#popup').data('popup').close();")},beforeOpen:function(){$("#"+game.gameName+"-guess-input").blur();$(document).on("keydown",function(a){13==a.keyCode&&$("#popup").data("popup").close()})},
afterOpen:function(){e=setTimeout("$('#popup').data('popup').close();",3E3);$(".popup_cont").draggable({handle:".popup-title"})},afterClose:function(){clearTimeout(e);game.focusInput();$(document).off("keydown",null,null)}});$("#popup").data("popup").open()}};
WordGame.prototype.guessFeedback=function(a){window.onbeforeunload=confirmOnPageExit;var b=makeElement("div",{"class":"word-row"});b.innerHTML=game.line;for(var c=0,e=0,d=0;5>d;d++){var g=a.charAt(d);b.getElementsByClassName("word-col")[d].innerHTML=g;-1!=beach(game.getWord()).search(g)&&(beach(game.getWord()).search(g)==d?c++:e++)}b.getElementsByClassName("response")[0].innerHTML=c;b.getElementsByClassName("response")[1].innerHTML=e;if(0==c+e)for(d=0;d<b.getElementsByClassName("word-col").length;d++)game.letterColors[game.guesses.indexOf(a)][d]=
"eliminated";game.wordRows.push(b);$(".word-col").draggable({helper:function(a){a=$(this).clone().appendTo(game.gameEl);$(this).toggleClass("ghost");return a},stop:function(a,b){$(this).toggleClass("ghost")},distance:20});game.updateColors();return b};WordGame.prototype.extraEnterGuess=function(){};
WordGame.prototype.animateGuess=function(a){$(a).insertBefore(".bottom-guess-inputs");$("#"+game.gameName+"-game-wrapper").animate({height:$("#"+game.gameName+"-game-wrapper").height()+$(".word-row").first().outerHeight()+("time"==game.gameName?parseInt($("#time-bottom-guess-inputs").css("margin-bottom")):0)+"px"},750);$("#"+game.gameName+"-bottom-guess-inputs").animate({bottom:"-"+$(".word-row").first().outerHeight()+"px"},750,function(){$("#"+game.gameName+"-game-wrapper").css("height","auto");
$(a).fadeIn().removeClass("hidden-game");$("#"+game.gameName+"-bottom-guess-inputs").css("bottom","0px");game.focusInput()})};WordGame.prototype.animateToFirstguess=function(){$("#"+game.gameName+"-game").animate({height:$("#"+game.gameName+"-first-guess-wrapper").actualHeight()+"px","padding-top":"24px","padding-bottom":"20px"},function(){$("#"+game.gameName+"-first-guess-wrapper").fadeIn().removeClass("hidden-game");game.focusInput()})};
WordGame.prototype.animateFromFirstGuess=function(a){$("#"+this.gameName+"-first-guess-wrapper").animate({opacity:"0"},function(){$("#"+game.gameName+"-first-guess-wrapper").remove();$(a).insertBefore(".bottom-guess-inputs");$("#"+game.gameName+"-game").animate({height:"0px","padding-top":"0px","padding-bottom":"0px"},function(){game.expandContainer()})})};
WordGame.prototype.expandContainer=function(){$("#"+game.gameName+"-game").animate({height:$("#"+game.gameName+"-game-wrapper").actualHeight()+"px","padding-top":"20px","padding-bottom":"20px"},function(){$("#"+game.gameName+"-game-wrapper").fadeIn().removeClass("hidden-game").css("height","auto");$("#"+game.gameName+"-game").css("height","auto");game.focusInput().attr("placeholder",game.maxGuesses-game.numberOfGuesses()+" guess"+(9==game.numberOfGuesses()?"":"es")+" left");$("#font-size, #settings-button").fadeIn();
game.focusInput()})};WordGame.prototype.letterDropped=function(a,b){var c=$(a).index();b.parent().index();b=b.text();a=$(a);a.text();-1!==$.inArray(b,game.specialLetters.eliminated)&&1==game.gameSettings.autoRed||-1!==$.inArray(b,game.specialLetters.top)||(game.specialLetters.top[c]=b,a.text(b),game.updateColors())};
WordGame.prototype.clickHolder=function(a){var b=a.target.innerHTML,c=$(a.target).index();if(""==b)for(var b=!1,e=0;e<game.wordRows.length;e++){var d=game.wordRows[e].getElementsByClassName("word-col")[c];1==$(d).hasClass("green")&&(0==b?(game.specialLetters.top[c]=d.innerHTML,a.target.innerHTML=d.innerHTML,b=!0):game.letterColors[e][c]="")}else game.specialLetters.top[c]="clear_"+b,a.target.innerHTML="";game.updateColors()};
WordGame.prototype.highlightLetter=function(a){a=$(a);var b="tentative_"+game.numberOfGuesses();a.hasClass("green")?b="":a.hasClass("yellow")?b="orange":a.hasClass("orange")?b="green":a.hasClass("red")&&(b="yellow");game.letterColors[$(".word-row").index(a.parent())][a.index()]=b;game.updateColors()};
WordGame.prototype.updateColors=function(a){for(var b=!1,c=0;c<game.wordRows.length;c++){for(var e=game.wordRows[c],d=0;d<game.letterColors[c].length;d++){var g=e.getElementsByClassName("word-col")[d];if("eliminated"==game.letterColors[c][d]){if(1==game.gameSettings.autoRed?game.letterColors[c][d]="red":0==game.gameSettings.autoRed&&"undefined"!=typeof a&&(game.letterColors[c][d]=""),-1===$.inArray(g.innerHTML,game.specialLetters.eliminated)){game.specialLetters.eliminated.push(g.innerHTML);for(b=
0;b<game.specialLetters.tentative.length;b++)game.specialLetters.tentative[b]==g.innerHTML&&game.specialLetters.tentative.splice(b,1);b=!0}}else for(var f=0;f<game.specialLetters.eliminated.length;f++)game.specialLetters.eliminated[f]==g.innerHTML&&(1==game.gameSettings.autoRed?game.letterColors[c][d]="red":0==game.gameSettings.autoRed&&"undefined"!=typeof a&&(game.letterColors[c][d]=""));for(f=0;f<game.specialLetters.top.length;f++)if(game.specialLetters.top[f]==g.innerHTML)1==game.gameSettings.autoGreen?
1==game.gameSettings.autoOrange&&$(g).index()!=f?game.letterColors[c][d]="orange":game.letterColors[c][d]="green":0==game.gameSettings.autoGreen&&"undefined"!=typeof a&&(game.letterColors[c][d]="");else if(-1<game.specialLetters.top[f].search("clear")){game.letterColors[c][d].split("_");if(1==game.gameSettings.autoOrange&&f!=d&&$(g).hasClass("orange")||1==game.gameSettings.autoGreen&&f==d&&$(g).hasClass("green")||1==game.gameSettings.autoGreen&&f==d&&$(g).hasClass("green"))game.letterColors[c][d]=
"";c+1==game.wordRows.length&&d+1==game.letterColors[c].length&&(game.specialLetters.top[f]="")}if(-1<game.letterColors[c][d].search("tentative"))parseInt(game.letterColors[c][d].split("_")[1])<game.numberOfGuesses()&&(1==game.gameSettings.autoRedOnGuess?game.letterColors[c][d]="red":0==game.gameSettings.autoRedOnGuess&&"undefined"!=typeof a&&(game.letterColors[c][d]=""),-1===$.inArray(g.innerHTML,game.specialLetters.tentative)&&(game.specialLetters.tentative.push(g.innerHTML),b=!0));else for(f=0;f<
game.specialLetters.tentative.length;f++)game.specialLetters.tentative[f]==g.innerHTML&&(1==game.gameSettings.autoRedOnGuess?game.letterColors[c][d]="red":0==game.gameSettings.autoRedOnGuess&&"undefined"!=typeof a&&(game.letterColors[c][d]=""));f=game.letterColors[c][d];if(-1<f.search("tentative")||"eliminated"==f)f="red";1!=$(g).hasClass(f)&&""!=f?game.addColor($(g),f):""==f&&game.removeColors($(g))}1==b&&(c=-1,b=!1)}game.saveGame()};WordGame.prototype.addColor=function(a,b){a.removeClass("red yellow orange green").addClass(b)};
WordGame.prototype.removeColors=function(a){$(a).removeClass("red yellow orange green")};
WordGame.prototype.gameWon=function(){window.onbeforeunload=null;clearSave();if(game.guesses[game.numberOfGuesses()-1]==beach(game.getWord()))$("#popup").popup({content:function(){var a=game.gameWonMessage()+" Play @FivesWordGame at http://fives.jondolan.me!";return buildPopup("Congrats, you won!","Do you want to tweet about your victory?<div class = 'popup-tweet'>"+a+"</div>","Tweet it!","clearSave(); location.href='https://twitter.com/intent/tweet?text="+encodeURIComponent(a)+"'","New game","$('#popup').data('popup').close();")},
beforeOpen:function(){scrollToTop();$("#"+game.gameName+"-guess-input").blur()},afterClose:function(){location.reload()},afterOpen:function(){$(".popup_cont").draggable({handle:".popup-title"})}}),$("#popup").data("popup").open();else return"haven't won yet :P"};
WordGame.prototype.gameLost=function(){$("#popup").popup({content:function(){return buildPopup("You lost :(","That was your last guess! The word was "+beach(game.getWord()),"Try again!","$('#popup').data('popup').close();")},beforeOpen:function(){window.onbeforeunload=null;$("#"+game.gameName+"-guess-input").blur();$(document).on("keydown",function(a){13==a.keyCode&&$("#popup").data("popup").close()})},afterOpen:function(){$(".popup_cont").draggable({handle:".popup-title"});clearSave()},afterClose:function(){location.reload()}});
$("#popup").data("popup").open()};WordGame.prototype.gameWonMessage=function(){return game.guesses[game.numberOfGuesses()-1]==beach(game.getWord())?'I won a #Fives "'+game.fancyName+'" game in '+game.numberOfGuesses()+" "+(1==game.numberOfGuesses()?"guess":"guesses")+"! The word was "+beach(game.getWord())+".":"haven't won yet :P"};
WordGame.prototype.showSettings=function(){$("#popup").popup({content:function(){return buildPopup("Settings","<p class = 'switch-p'>Auto green same letters when letter placed in top holder:</p>"+game.buildSwitch("autoGreen","game.toggleSettingsHandler")+"<br /><br /><p class = 'switch-p'>^Make the same letters in different columns orange instead:</p>"+game.buildSwitch("autoOrange","game.toggleSettingsHandler")+"<br /><br /><p class = 'switch-p'>Auto red if the word has 0 rlwp and rlrp:</p>"+game.buildSwitch("autoRed",
"game.toggleSettingsHandler")+"<br /><br /><p class = 'switch-p'>Auto red letters that you make red (applied after next guess is submitted):</p>"+game.buildSwitch("autoRedOnGuess","game.toggleSettingsHandler")+"<br /><br /><p class = 'switch-p'>Show the font size changer: </p>"+game.buildSwitch("fontSize","game.toggleSettingsHandler")+"<br /><br /><p class = 'switch-p'>Allow game saving (will delete current game save): </p>"+game.buildSwitch("autoSave","game.toggleSettingsHandler"),"Apply","$('#popup').data('popup').close();")},
beforeOpen:function(){$("#"+game.gameName+"-guess-input").blur();$(document).on("keydown",function(a){13==a.keyCode&&$("#popup").data("popup").close()})},afterOpen:function(){$(".popup_cont").draggable({handle:".popup-title"})},afterClose:function(){game.focusInput();$(document).off("keydown",null,null);game.applySettings()}});$("#popup").data("popup").open()};
WordGame.prototype.toggleSettingsHandler=function(a){"autoOrange"==a.id&&1==a.checked&&1!=game.gameSettings.autoGreen?a.checked=!1:("autoGreen"==a.id&&1==game.gameSettings.autoOrange?(document.getElementById("autoOrange").checked=!1,game.gameSettings.autoOrange=!1):"autoSave"==a.id&&0==canLocalStorage()&&(a.checked=!1),game.gameSettings[a.id]=a.checked)};
WordGame.prototype.applySettings=function(){1==game.gameSettings.fontSize?$("#font-size").fadeIn():$("#font-size").fadeOut();game.updateColors(!0);0==game.gameSettings.autoSave?clearSave():game.saveGame()};WordGame.prototype.buildSwitch=function(a,b){return'<div class="onoffswitch"><input type="checkbox" onclick = "'+b+'(this)" name="'+a+'" class="onoffswitch-checkbox" id="'+a+'" '+(game.gameSettings[a]?"checked":"")+'><label class="onoffswitch-label" for="'+a+'"><span class="onoffswitch-inner"></span><span class="onoffswitch-switch"></span></label></div>'};
WordGame.prototype.saveGame=function(){if(1==game.gameSettings.autoSave&&0!=canLocalStorage()){for(var a=0;a<saveFields.length;a++)"word"==saveFields[a]||"fancyName"==saveFields[a]?localStorage.setItem(waves(saveFields[a]),waves(game[saveFields[a]])):localStorage.setItem(waves(saveFields[a]),waves(JSON.stringify(game[saveFields[a]])));localStorage.setItem(waves("time"),waves((new Date).getTime()))}};
function clearSave(){if(0!=canLocalStorage()){var a=localStorage.getItem(waves("gameSettings"));localStorage.clear();localStorage.setItem(waves("gameSettings"),a)}}
WordGame.prototype.continueGame=function(){var a=document.getElementById(game.gameName+"-game-wrapper");game.addResponseTitles(a);game.addInputs(a);for(a=0;a<game.numberOfGuesses();a++){var b=game.guessFeedback(game.guesses[a]);$(b).insertBefore(".bottom-guess-inputs")}for(a=0;a<$(".holder").length;a++)$(".holder")[a].innerHTML=game.specialLetters.top[a];game.expandContainer()};function RegularGame(a){this.base=WordGame;this.base("regular")}RegularGame.prototype=new WordGame;
function EasyGame(a){this.base=WordGame;this.base("easy");this.line='<span class = "easy-word-col"></span><span class = "easy-word-col"></span><span class = "easy-word-col"></span><span class = "easy-word-col"></span><span class = "easy-word-col"></span></span>'}EasyGame.prototype=new WordGame;EasyGame.prototype.addResponseTitles=function(a){};
EasyGame.prototype.guessFeedback=function(a){window.onbeforeunload=confirmOnPageExit;var b=makeElement("div",{"class":"word-row"});b.innerHTML=game.line;for(var c=0;5>c;c++){var e=a.charAt(c);b.getElementsByClassName("easy-word-col")[c].innerHTML=e;-1!=beach(this.getWord()).search(e)&&(beach(this.getWord()).search(e)==c?($(b.getElementsByClassName("easy-word-col")[c]).addClass("green"),$(".holder")[c].innerHTML=e,game.specialLetters.top[c]=e):$(b.getElementsByClassName("easy-word-col")[c]).addClass("yellow"))}game.wordRows.push(b);
game.saveGame();return b};EasyGame.prototype.clickHolder=function(){};EasyGame.prototype.updateColors=function(){};function TimeGame(a){this.base=WordGame;this.base("time");this.maxGuesses=15;this.reloadMessage="Progress will be LOST if you leave or reload the game!"}TimeGame.prototype=new WordGame;TimeGame.prototype.extraSetup=function(){var a=makeElement("div",{"class":"timer",id:game.gameName+"-timer"});a.innerHTML="0:00";game.timerSecs=0;game.timerMins=0;game.timeLeap=0;$(game.gameContainer).prepend(a)};
TimeGame.prototype.extraEnterGuess=function(){"undefined"==typeof game.gameInterval&&(game.gameInterval=setInterval("updateTimer()",1E3))};
function updateTimer(){var a=(new Date).getTime()-game.lastTime,b=$("#"+game.gameName+"-timer"),c=game.timerSecs+1,e=game.timerMins;1E3<a&&(game.timeLeap+=a-1E3);1E3<=game.timeLeap?(c+=1,game.timeLeap-=1E3):0>game.timeLeap&&(game.timeLeap=0);var a=parseInt(b.text().split(":")[1])+1,d=parseInt(b.text().split(":")[0]);a>c&&(c=a);d>e&&(e=d);60<=c&&(e++,c=0);b.text(e+":"+(10>c?"0":"")+c);game.timerSecs=c;game.timerMins=e;game.lastTime=(new Date).getTime()}
TimeGame.prototype.gameWonMessage=function(){clearInterval(game.gameInterval);return'I won a #Fives "'+game.fancyName+'" game in '+(0==game.timerMins?"":game.timerMins+" "+((1==game.timerMins?"minute":"minutes")+" and "))+game.timerSecs+" "+(1==game.timerSecs?"second":"seconds")+"! The word was "+beach(game.getWord())+"."};TimeGame.prototype.saveGame=function(){};function MultiGame(a){this.base=WordGame;this.base("multi")}MultiGame.prototype=new WordGame;
MultiGame.prototype.pickWord=function(){var a=makeElement("div",{id:game.gameName+"-setup-wrapper","class":"hidden-game"},game.gameEl);makeElement("div",{"class":"first-guess"},a).innerHTML='Word to be guessed:<p class = "small-notice">(will not be shown again)</p>';var a=makeElement("p",{"class":"bottom-guess-inputs"},a),b=makeElement("input",{"class":"text",id:game.gameName+"-word-input",maxlength:"5",type:"password"},a);makeElement("input",{"class":"button",id:"submit-multi-word",value:"Play!",
type:"submit"},a);$("#multi-word-input").on("keyup",{name:"submit-multi-word"},submitForm);$("#submit-multi-word").on("click",function(){document.getElementById(game.gameName+"-word-input").removeAttribute("onkeyup");game.submitMultiWord()});$("#"+this.gameName+"-game").animate({height:$("#"+this.gameName+"-setup-wrapper").actualHeight()+"px","padding-top":"20px","padding-bottom":"20px"},function(){$("#"+game.gameName+"-setup-wrapper").fadeIn().removeClass("hidden-game");$("#"+game.gameName+"-game").css("height",
"auto");b.focus()})};
MultiGame.prototype.submitMultiWord=function(){var a=$("#multi-word-input").val().toLowerCase(),b=game.isValidWord(a);if(1==b)game.setWord(a),$("#"+game.gameName+"-setup-wrapper").animate({opacity:"0"},function(){$("#"+game.gameName+"-game").animate({height:"0px","padding-top":"0px","padding-bottom":"0px"},function(){$("#"+game.gameName+"-setup-wrapper").remove();game.setupFirstGuess()})});else{document.getElementById(game.gameName+"-word-input").setAttribute("onkeyup","submitForm(event, 'submit-multi-word');");var c;
$("#popup").popup({content:function(){return buildPopup("Word is invalid!",b+"<br /><br />This closes automatically in 3 seconds","Continue","$('#popup').data('popup').close();")},beforeOpen:function(){$("#"+game.gameName+"-word-input").blur();$(document).on("keydown",function(a){13==a.keyCode&&$("#popup").data("popup").close()})},afterOpen:function(){c=setTimeout("$('#popup').data('popup').close();",3E3);$(".popup_cont").draggable({handle:".popup-title"})},afterClose:function(){clearTimeout(c);$("#"+
game.gameName+"-word-input").focus();$(document).off("keydown",null,null)}});$("#popup").data("popup").open()}};
function startGame(a,b){scrollToTop();$("#game-container").on("click",".word-col",function(){game.highlightLetter(this)});Hash.go("gametime");if("multi"==a||"multiplayer"==a)game=new MultiGame;else if("easy"==a||"practice"==a)game=new EasyGame;else if("regular"==a||"classic"==a)game=new RegularGame;else if("time"==a||"time trial"==a)game=new TimeGame;var c=document.getElementById(game.gameName+"-start-button");"undefined"!=typeof ga&&"undefined"==typeof b&&ga("send","event","game","play",game.gameName);
$("#how-to-container").fadeOut(1E3);$(c).css("z-index","10");$(".new-game-buttons").each(function(a,d){c!==d&&($(d).off("click"),$(d).animate({left:$(c).position().left-$(d).position().left+"px",top:$(c).position().top-$(d).position().top+"px"},1E3,function(){(a==$(".new-game-buttons").length-1||$(".new-game-buttons")[$(".new-game-buttons").length-1]==c&&a==$(".new-game-buttons").length-2)&&$("#new-game").animate({height:"0px",padding:"0px",opacity:0},750,function(){$("#new-game").remove();"undefined"!=
typeof b?game.setup(b):game.setup()})}))})}String.prototype.repeatedLetters=function(){for(var a=0;a<this.length;a++)if(-1!=this.indexOf(this.substring(a,a+1))&&this.indexOf(this.substring(a,a+1))!=a)return!0;return!1};Array.prototype.binarySearch=function(a){for(var b=0,c=this.length-1,e;b<=c;)if(e=Math.floor((b+c)/2),this[e]<a)b=e+1;else if(this[e]>a)c=e-1;else return e;return null};
$.fn.actualHeight=function(){var a=this.closest(":visible").children(),b;a.addClass("temp-show");b=this.height();a.removeClass("temp-show");return b};function submitForm(a){13==a.keyCode&&document.getElementById(a.data.name).click()}var confirmOnPageExit=function(a){a=a||window.event;var b=game.reloadMessage;a&&(a.returnValue=b);return b};
function enableClickButtons(){$("#easy-start-button").click(function(){startGame("easy")});$("#regular-start-button").click(function(){startGame("regular")});$("#time-start-button").click(function(){startGame("time")});$("#multi-start-button").click(function(){startGame("multi")})}
function buildPopup(a,b,c,e,d,g){var f=makeElement("div",{"class":"center"});makeElement("h2",{"class":"popup-title"},f).innerHTML=a;makeElement("div",{"class":"popup-message"},f).innerHTML=b;"undefined"!=typeof c&&(makeElement("span",{"class":"popup-button "+("undefined"==typeof d?"one":""),onclick:e},f).innerHTML=c);"undefined"!=typeof d&&(makeElement("span",{"class":"popup-button",onclick:g},f).innerHTML=d);return f}
function makeElement(a,b,c){var e=document.createElement(a);$.each(b,function(a,b){e.setAttribute(a,b)});"undefined"!=typeof c&&$(c).append(e);return e}
function hashHandler(a,b){b?Hash.go(""):""==a&&"undefined"!==typeof game&&(window.onbeforeunload=null,$("#popup").popup({content:function(){return buildPopup("You sure?","Are you sure you want to quit this game?<br />Progress will be lost.","Yes, quit","clearSave(); location.reload();","No, save me!","window.onbeforeunload = confirmOnPageExit; $('#popup').data('popup').close(); Hash.go('gametime');")},afterOpen:function(){$(".popup_cont").draggable({handle:".popup-title"})}}),$("#popup").data("popup").open())}
function scrollToTop(){$("html, body").animate({scrollTop:0})}function fontSizeChange(a){"increase"==a.id?$("#"+game.gameName+"-game-wrapper").css("font-size",parseInt($("#"+game.gameName+"-game-wrapper").css("font-size"))+5+"px"):"decrease"==a.id&&$("#"+game.gameName+"-game-wrapper").css("font-size",parseInt($("#"+game.gameName+"-game-wrapper").css("font-size"))-5+"px")}function canLocalStorage(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}
function GameLoader(){var a={};try{for(var b=0;b<saveFields.length;b++)if(localStorage.getItem(waves(saveFields[b])))a[saveFields[b]]=beach(localStorage.getItem(waves(saveFields[b])));else return 0;if(1==WordGame.prototype.isValidWord(beach(a.word))){a.guesses=JSON.parse(a.guesses);for(b=0;b<a.guesses.length;b++)if(1!=WordGame.prototype.isValidWord(a.guesses[b]))return;a.letterColors=JSON.parse(a.letterColors);$.each(a.letterColors,function(a,b){1==b.length&&""==b||$(this).remove()});a.specialLetters=
JSON.parse(a.specialLetters);$.each(a.specialLetters,function(a,b){1==b.length&&""==b||$(this).remove()});a.gameSettings=JSON.parse(a.gameSettings);a.time=parseInt(beach(localStorage.getItem(waves("time"))));return a}}catch(c){}}
$(document).ready(function(){window.applicationCache.addEventListener("updateready",function(a){window.applicationCache.status==window.applicationCache.UPDATEREADY&&window.location.reload()},!1);Hash.init(hashHandler,document.getElementById("hidden-iframe"));if(0!=canLocalStorage()){var a=GameLoader();0!=a&&"undefined"!=typeof a?($("#popup").popup({content:function(){return buildPopup("Continue your last game?","You have a saved "+a.fancyName+" game from "+$.timeago(a.time)+".<br />You were on your "+
(a.guesses.length+1)+(1==a.guesses.length+1?"st":2==a.guesses.length+1?"nd":3==a.guesses.length+1?"rd":"th")+" guess.<br />Do you want to continue that game?","Continue","$('#popup').data('popup').close(); startGame('"+a.fancyName+"', "+JSON.stringify(a)+");","Discard Game","clearSave(); $('#popup').data('popup').close();")},beforeOpen:function(){scrollToTop()},afterOpen:function(){$(".popup_cont").draggable({handle:".popup-title"})},afterClose:function(){"undefined"==typeof game&&(enableClickButtons(),
clearSave())}}),setTimeout("$('#popup').data('popup').open();",500)):enableClickButtons()}else enableClickButtons()});
